// The batch implementation of permitTransferFrom allows for an array fo token IDs to be transferred via a single signature
// Permit transfer from allows a token owner to sign a message to enable another user to execute a transfer from
// This signature has a token address, ID, amount, nonce, operator and expiry
// If any of these values are invalid, the signature will be rejected
// The signature is generated by the token owner and sent to the operator
// If the signature resolves to any address aside from the token owner, the signature will be rejected
permitTransferFrom.t.sol
|- When the signature expiration is in the past
    |- it should revert
|- When the signature expiration is the current timestamp or in the future
    |- When the length of the ID array is not equal to the length of the tokens array
        |- it should revert
    |- When the length of the ID array is equal to the length of the tokens array
        |- When the length of the ID array is not equal to the length of the amounts array
            |- it should revert
        |- When the length of the ID array is equal to the length of the amounts array
            |- When the length of the ID array is not equal to the length of the details array
                |- it should revert
            |- When the length of the ID array is equal to the length of the details array
                |- When the length of the ID array is 0
                    |- it should revert
                |- When the length of the ID array is greater than 0
                    |- When the signature nonce is marked as used
                        |- it should revert
                    |- When the signature nonce is not marked as used
                        |- When the signature does not recover to the token owner
                            |- it should revert
                        |- When the signature does recover to the token owner
                            |- when the owner's master nonce is less than the nonce on the signature
                                |- it should revert
                            |- when the owner's master nonce is greater than the nonce on the signature
                                |- it should revert
                            |- when the owner's master nonce is equal to the nonce on the signature
                                |- when the signer is an EOA
                                    |- when the protocol is ERC721
                                        |- it should transfer the requested token ID
                                        |- it should emit a Transfer event
                                        |- it should mark the nonce as used
                                    |- when the protocol is ERC1155
                                        |- when the amount is 1
                                            |- it should transfer the requested token ID
                                            |- it should emit a TransferSingle event
                                            |- it should mark the nonce as used
                                        |- when the amount is greater than 1
                                            |- it should transfer the requested token ID
                                            |- it should emit a TransferBatch event
                                            |- it should mark the nonce as used
                                    |- when the protocol is not ERC721 or ERC1155
                                        |- it should revert
                                |- when the signer is a smart contract
                                    |- when the smart contract implements EIP1271
                                        |- when the smart contract returns an invalid signature
                                            |- it should revert
                                        |- when the smart contract returns a valid signature
                                            |- it should transfer the requested amount
                                            |- it should emit a Transfer event
                                            |- it should mark the nonce as used
                                    |- when the smart contract does not implement EIP1271
                                        |- it should revert