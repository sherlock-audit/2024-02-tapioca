// Permit transfer from with additional data allows a token owner to sign a message with appended data to approve an operator to transfer a token ID
// This signature has a token address, ID, amount, nonce, operator and expiry in addition to whatever additional data is defined
// If any of these values are invalid, the signature will be rejected
// The signature is generated by the token owner and sent to the operator
// If the signature resolves to any address aside from the token owner, the signature will be rejected
permitTransferFromWithAdditionalData.t.sol
|- when PermitC is not approved for the requested token ID
    |- it should revert
|- when PermitC is approved for the requested token ID
    |- when the caller is not the operator on the signature
        |- it should revert
    |- when the caller is the operator on the signature
        |- when the function on the signature is not a concatenation of `PermitTransferFromAdvanced(address token,uint256 id,uint256 amount,uint256 nonce,address operator,uint256 expiration,` and the additional data
            |- it should revert
        |- when the function on the signature is a concatenation of `PermitTransferFromAdvanced(address token,uint256 id,uint256 amount,uint256 nonce,address operator,uint256 expiration,` and the additional data
            |- when the block timestamp is greater than the expiry
                |- it should revert
            |- when the block timestamp is less than the expiry
                |- when the requested amount is greater than the approved amount
                    |- it should revert
                |- when the requested amount is less than the approved amount
                    |- when the nonce has been used
                        |- it should revert
                    |- when the nonce has not been used
                        |- when the token address is not the same as the token address on the signature
                            |- it should revert
                        |- when the token address is the same as the token address on the signature
                            |- when the token ID is not the same as the token ID on the signature
                                |- it should revert
                            |- when the token ID is the same as the token ID on the signature
                                |- when the signer is not the token owner
                                    |- it should revert
                                |- when the signer is the token owner
                                    |- when the additional data is not the same as the additional data on the signature
                                        |- it should revert
                                    |- when the additional data is the same as the additional data on the signature
                                        |- when the owner's master nonce is less than the nonce on the signature
                                            |- it should revert
                                        |- when the owner's master nonce is greater than the nonce on the signature
                                            |- it should revert
                                        |- when the owner's master nonce is equal to the nonce on the signature
                                            |- when the signer is an EOA
                                                |- when the protocol is ERC721
                                                    |- it should transfer the requested token ID
                                                    |- it should emit a Transfer event
                                                    |- it should mark the nonce as used
                                                |- when the protocol is ERC1155
                                                    |- when the amount is 1
                                                        |- it should transfer the requested token ID
                                                        |- it should emit a TransferSingle event
                                                        |- it should mark the nonce as used
                                                    |- when the amount is greater than 1
                                                        |- it should transfer the requested token ID
                                                        |- it should emit a TransferBatch event
                                                        |- it should mark the nonce as used
                                                |- when the protocol is not ERC721 or ERC1155
                                                    |- it should revert
                                            |- when the signer is a smart contract
                                                |- when the smart contract implements EIP1271
                                                    |- when the smart contract returns an invalid signature
                                                        |- it should revert
                                                    |- when the smart contract returns a valid signature
                                                        |- it should transfer the requested amount
                                                        |- it should emit a Transfer event
                                                        |- it should mark the nonce as used
                                                |- when the smart contract does not implement EIP1271
                                                    |- it should revert
